<div class="pt-[72px] min-h-screen bg-[#0a0a0a]">

  <!-- Header -->
  <div class="relative py-24 px-4 overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-b from-[#080808] via-[#0a0a0a] to-[#0a0a0a]"></div>
    <div class="grain-texture absolute inset-0 pointer-events-none"></div>
    <div class="absolute -bottom-8 left-1/2 w-[600px] h-52 bg-[#C8A96E]/[0.06] blur-[80px] pointer-events-none"
      style="transform: translateX(-50%)"></div>
    <div class="absolute inset-x-0 top-0 h-20 bg-gradient-to-b from-black/40 to-transparent pointer-events-none"></div>
    <div class="relative z-10 max-w-7xl mx-auto text-center">
      <p class="anim-fade anim-d0 text-[#C8A96E]/60 text-[10px] tracking-[0.55em] uppercase mb-7 font-light">La Mokka</p>
      <h1 class="anim-fade anim-d150 font-display text-5xl sm:text-6xl font-light italic text-[#f0ece4] mb-7 leading-none">
        Бронювання
      </h1>
      <div class="anim-fade anim-d300 flex items-center justify-center gap-5 mb-7">
        <div class="h-px w-16 bg-gradient-to-r from-transparent to-[#C8A96E]/40"></div>
        <div class="w-1 h-1 bg-[#C8A96E]/60 rotate-45 shrink-0"></div>
        <div class="h-px w-16 bg-gradient-to-l from-transparent to-[#C8A96E]/40"></div>
      </div>
      <p class="anim-fade anim-d450 text-[#f0ece4]/30 text-sm font-light tracking-wide">
        Заберіть місце та насолоджуйтесь без очікування
      </p>
    </div>
  </div>

  <!-- Content -->
  <div class="max-w-xl mx-auto px-4 pb-20">

    <!-- Success State -->
    @if (success()) {
      <div class="border border-white/[0.06] bg-[#0a0a0a] p-12 text-center">
        <div class="w-12 h-12 border border-[#C8A96E]/30 flex items-center justify-center mx-auto mb-6">
          <svg class="w-5 h-5 text-[#C8A96E]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 13l4 4L19 7"/>
          </svg>
        </div>
        <p class="text-[#C8A96E]/50 text-[9px] tracking-[0.45em] uppercase font-light mb-4">Підтверджено</p>
        <h2 class="font-display text-[#f0ece4]/85 text-2xl font-light italic mb-4">Бронювання прийнято</h2>
        <div class="h-px w-10 bg-gradient-to-r from-[#C8A96E]/30 to-transparent mx-auto mb-6"></div>
        <p class="text-[#f0ece4]/35 text-sm font-light leading-relaxed mb-10">
          Дякуємо! Ми зв'яжемося з вами найближчим часом для підтвердження бронювання.
        </p>
        <div class="flex flex-col sm:flex-row gap-3 justify-center">
          <button
            (click)="resetForm()"
            class="border border-[#C8A96E]/40 text-[#C8A96E] px-8 py-3 text-[10px] tracking-[0.3em] uppercase font-light hover:bg-[#C8A96E]/[0.08] hover:border-[#C8A96E]/70 transition-all duration-300">
            Нове бронювання
          </button>
          <a routerLink="/"
            class="border border-white/[0.08] text-[#f0ece4]/35 px-8 py-3 text-[10px] tracking-[0.3em] uppercase font-light hover:border-white/[0.18] hover:text-[#f0ece4]/55 transition-all duration-300">
            Переглянути меню
          </a>
        </div>
      </div>

    } @else {

      <!-- Form -->
      <div class="border border-white/[0.06]">

        <!-- Form header -->
        <div class="px-7 py-5 border-b border-white/[0.06]">
          <p class="text-[#C8A96E]/50 text-[9px] tracking-[0.45em] uppercase font-light mb-1.5">Деталі</p>
          <h2 class="font-display text-[#f0ece4]/75 text-xl font-light">Забронювати стіл</h2>
        </div>

        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="px-7 py-7 space-y-6">

          <!-- Name -->
          <div>
            <label class="block text-[#f0ece4]/25 text-[9px] tracking-[0.4em] uppercase font-light mb-2.5">
              Ваше ім'я *
            </label>
            <input
              type="text"
              formControlName="name"
              placeholder="Введіть ваше ім'я"
              [class]="submitted() && f['name'].invalid ? 'border-red-500/40' : 'border-white/[0.08] focus:border-[#C8A96E]/50'"
              class="w-full bg-transparent text-[#f0ece4]/65 border px-4 py-3 text-sm font-light outline-none transition-colors duration-200 placeholder-[#f0ece4]/[0.12]">
            @if (submitted() && f['name'].errors?.['required']) {
              <p class="text-red-400/55 text-[10px] mt-1.5 tracking-wide font-light">Вкажіть ваше ім'я</p>
            }
            @if (submitted() && f['name'].errors?.['minlength']) {
              <p class="text-red-400/55 text-[10px] mt-1.5 tracking-wide font-light">Мінімум 2 символи</p>
            }
          </div>

          <!-- Phone -->
          <div>
            <label class="block text-[#f0ece4]/25 text-[9px] tracking-[0.4em] uppercase font-light mb-2.5">
              Телефон *
            </label>
            <input
              type="tel"
              formControlName="phone"
              placeholder="+38 (0__) ___-__-__"
              [class]="submitted() && f['phone'].invalid ? 'border-red-500/40' : 'border-white/[0.08] focus:border-[#C8A96E]/50'"
              class="w-full bg-transparent text-[#f0ece4]/65 border px-4 py-3 text-sm font-light outline-none transition-colors duration-200 placeholder-[#f0ece4]/[0.12]">
            @if (submitted() && f['phone'].errors?.['required']) {
              <p class="text-red-400/55 text-[10px] mt-1.5 tracking-wide font-light">Вкажіть номер телефону</p>
            }
            @if (submitted() && f['phone'].errors?.['pattern']) {
              <p class="text-red-400/55 text-[10px] mt-1.5 tracking-wide font-light">Введіть коректний номер</p>
            }
          </div>

          <!-- Date & Time -->
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-[#f0ece4]/25 text-[9px] tracking-[0.4em] uppercase font-light mb-2.5">Дата *</label>
              <input
                type="date"
                formControlName="date"
                [min]="minDate"
                [class]="submitted() && f['date'].invalid ? 'border-red-500/40' : 'border-white/[0.08] focus:border-[#C8A96E]/50'"
                class="w-full bg-[#0a0a0a] text-[#f0ece4]/65 border px-4 py-3 text-sm font-light outline-none transition-colors duration-200">
              @if (submitted() && f['date'].errors?.['required']) {
                <p class="text-red-400/55 text-[10px] mt-1.5 tracking-wide font-light">Оберіть дату</p>
              }
            </div>
            <div>
              <label class="block text-[#f0ece4]/25 text-[9px] tracking-[0.4em] uppercase font-light mb-2.5">Час *</label>
              <select
                formControlName="time"
                [class]="submitted() && f['time'].invalid ? 'border-red-500/40' : 'border-white/[0.08] focus:border-[#C8A96E]/50'"
                class="w-full bg-[#0a0a0a] text-[#f0ece4]/65 border px-4 py-3 text-sm font-light outline-none transition-colors duration-200">
                <option value="" disabled class="bg-[#0a0a0a]">Час</option>
                @for (slot of timeSlots; track slot) {
                  <option [value]="slot" class="bg-[#0a0a0a]">{{ slot }}</option>
                }
              </select>
              @if (submitted() && f['time'].errors?.['required']) {
                <p class="text-red-400/55 text-[10px] mt-1.5 tracking-wide font-light">Оберіть час</p>
              }
            </div>
          </div>

          <!-- Guests -->
          <div>
            <label class="block text-[#f0ece4]/25 text-[9px] tracking-[0.4em] uppercase font-light mb-2.5">Кількість гостей *</label>
            <div class="flex gap-2 flex-wrap">
              @for (n of guestOptions; track n) {
                <button
                  type="button"
                  (click)="form.patchValue({ guests: n })"
                  [class]="form.value.guests === n
                    ? 'border-[#C8A96E]/55 text-[#C8A96E] bg-[#C8A96E]/[0.07]'
                    : 'border-white/[0.08] text-[#f0ece4]/30 hover:border-white/[0.18] hover:text-[#f0ece4]/55'"
                  class="w-10 h-10 border text-sm font-light transition-all duration-200">
                  {{ n }}
                </button>
              }
            </div>
            <p class="text-[#f0ece4]/18 text-[10px] mt-2 font-light">Для груп понад 8 осіб телефонуйте нам</p>
          </div>

          <!-- Comments -->
          <div>
            <label class="block text-[#f0ece4]/25 text-[9px] tracking-[0.4em] uppercase font-light mb-2.5">Коментар</label>
            <textarea
              formControlName="comments"
              rows="3"
              placeholder="Особливі побажання, алергії, привід..."
              class="w-full bg-transparent text-[#f0ece4]/65 border border-white/[0.08] focus:border-[#C8A96E]/50 px-4 py-3 text-sm font-light outline-none transition-colors duration-200 resize-none placeholder-[#f0ece4]/[0.12]">
            </textarea>
          </div>

          <!-- Divider -->
          <div class="h-px bg-gradient-to-r from-[#C8A96E]/15 via-[#C8A96E]/5 to-transparent"></div>

          <!-- Submit -->
          <button
            type="submit"
            class="w-full border border-[#C8A96E]/35 text-[#C8A96E] py-4 text-[10px] tracking-[0.4em] uppercase font-light hover:bg-[#C8A96E]/[0.07] hover:border-[#C8A96E]/60 transition-all duration-300">
            Забронювати стіл
          </button>

          <p class="text-[#f0ece4]/18 text-xs text-center font-light">
            Після відправлення ми зв'яжемося з вами для підтвердження
          </p>
        </form>
      </div>

      <!-- Phone note -->
      <div class="mt-px border border-white/[0.06] bg-[#0a0a0a] px-7 py-5 flex items-start gap-4">
        <svg class="w-3.5 h-3.5 text-[#C8A96E]/50 shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
        </svg>
        <p class="text-[#f0ece4]/30 text-xs font-light">
          Або зателефонуйте нам:
          <a href="tel:0770717700" class="text-[#C8A96E]/65 hover:text-[#C8A96E] transition-colors duration-200">
            0770717700
          </a>
        </p>
      </div>
    }
  </div>
</div>
