<div class="pt-20 min-h-screen bg-[#232323]">
  <!-- Header -->
  <div class="bg-gradient-to-b from-[#1a1a1a] to-[#232323] py-16 px-4">
    <div class="max-w-7xl mx-auto text-center">
      <p class="text-[#FFA11B] text-sm font-semibold tracking-[0.3em] uppercase mb-2">La Mokka</p>
      <h1 class="text-4xl sm:text-5xl font-bold text-[#d6d6d6] mb-4">Бронювання столу</h1>
      <p class="text-[#d6d6d6]/60 text-lg">Заберіть місце та насолоджуйтесь без очікування</p>
    </div>
  </div>

  <div class="max-w-2xl mx-auto px-4 py-10 pb-20">
    <!-- Success State -->
    @if (success()) {
      <div class="bg-[#2d2d2d] rounded-2xl p-8 border border-[#FFA11B]/30 text-center">
        <div class="w-16 h-16 rounded-full bg-[#FFA11B]/15 flex items-center justify-center mx-auto mb-5">
          <svg class="w-8 h-8 text-[#FFA11B]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
          </svg>
        </div>
        <h2 class="text-[#d6d6d6] text-2xl font-bold mb-3">Бронювання прийнято!</h2>
        <p class="text-[#d6d6d6]/60 text-base mb-6 leading-relaxed">
          Дякуємо! Ми зв'яжемося з вами найближчим часом для підтвердження бронювання.
        </p>
        <div class="flex flex-col sm:flex-row gap-3 justify-center">
          <button
            (click)="resetForm()"
            class="bg-[#FFA11B] text-[#232323] px-6 py-3 rounded-full font-bold hover:bg-[#e8911a] transition-colors">
            Нове бронювання
          </button>
          <a routerLink="/menu"
             class="border border-white/20 text-[#d6d6d6] px-6 py-3 rounded-full font-medium hover:border-white/40 transition-colors">
            Переглянути меню
          </a>
        </div>
      </div>
    } @else {
      <!-- Booking Form -->
      <div class="bg-[#2d2d2d] rounded-2xl border border-white/5 overflow-hidden">
        <div class="p-6 border-b border-white/10">
          <h2 class="text-[#d6d6d6] font-semibold text-lg">Деталі бронювання</h2>
          <p class="text-[#d6d6d6]/50 text-sm mt-1">Всі поля, позначені *, є обов'язковими</p>
        </div>

        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="p-6 space-y-5">
          <!-- Name -->
          <div>
            <label class="block text-sm font-medium text-[#d6d6d6]/80 mb-1.5">
              Ваше ім'я *
            </label>
            <input
              type="text"
              formControlName="name"
              placeholder="Введіть ваше ім'я"
              [class]="submitted() && f['name'].invalid ? 'border-red-500 focus:border-red-500' : 'border-white/10 focus:border-[#FFA11B]'"
              class="w-full bg-[#232323] text-[#d6d6d6] border rounded-xl px-4 py-3 text-sm outline-none transition-colors placeholder-[#d6d6d6]/30">
            @if (submitted() && f['name'].errors?.['required']) {
              <p class="text-red-400 text-xs mt-1">Вкажіть ваше ім'я</p>
            }
            @if (submitted() && f['name'].errors?.['minlength']) {
              <p class="text-red-400 text-xs mt-1">Ім'я має містити мінімум 2 символи</p>
            }
          </div>

          <!-- Phone -->
          <div>
            <label class="block text-sm font-medium text-[#d6d6d6]/80 mb-1.5">
              Телефон *
            </label>
            <input
              type="tel"
              formControlName="phone"
              placeholder="+38 (0__) ___-__-__"
              [class]="submitted() && f['phone'].invalid ? 'border-red-500 focus:border-red-500' : 'border-white/10 focus:border-[#FFA11B]'"
              class="w-full bg-[#232323] text-[#d6d6d6] border rounded-xl px-4 py-3 text-sm outline-none transition-colors placeholder-[#d6d6d6]/30">
            @if (submitted() && f['phone'].errors?.['required']) {
              <p class="text-red-400 text-xs mt-1">Вкажіть номер телефону</p>
            }
            @if (submitted() && f['phone'].errors?.['pattern']) {
              <p class="text-red-400 text-xs mt-1">Введіть коректний номер телефону</p>
            }
          </div>

          <!-- Date & Time -->
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium text-[#d6d6d6]/80 mb-1.5">
                Дата *
              </label>
              <input
                type="date"
                formControlName="date"
                [min]="minDate"
                [class]="submitted() && f['date'].invalid ? 'border-red-500 focus:border-red-500' : 'border-white/10 focus:border-[#FFA11B]'"
                class="w-full bg-[#232323] text-[#d6d6d6] border rounded-xl px-4 py-3 text-sm outline-none transition-colors">
              @if (submitted() && f['date'].errors?.['required']) {
                <p class="text-red-400 text-xs mt-1">Оберіть дату</p>
              }
            </div>

            <div>
              <label class="block text-sm font-medium text-[#d6d6d6]/80 mb-1.5">
                Час *
              </label>
              <select
                formControlName="time"
                [class]="submitted() && f['time'].invalid ? 'border-red-500 focus:border-red-500' : 'border-white/10 focus:border-[#FFA11B]'"
                class="w-full bg-[#232323] text-[#d6d6d6] border rounded-xl px-4 py-3 text-sm outline-none transition-colors">
                <option value="" disabled>Час</option>
                @for (slot of timeSlots; track slot) {
                  <option [value]="slot">{{ slot }}</option>
                }
              </select>
              @if (submitted() && f['time'].errors?.['required']) {
                <p class="text-red-400 text-xs mt-1">Оберіть час</p>
              }
            </div>
          </div>

          <!-- Guests -->
          <div>
            <label class="block text-sm font-medium text-[#d6d6d6]/80 mb-1.5">
              Кількість гостей *
            </label>
            <div class="flex gap-2 flex-wrap">
              @for (n of guestOptions; track n) {
                <button
                  type="button"
                  (click)="form.patchValue({ guests: n })"
                  [class]="form.value.guests === n
                    ? 'bg-[#FFA11B] text-[#232323] border-[#FFA11B] font-bold'
                    : 'bg-[#232323] text-[#d6d6d6]/70 border-white/10 hover:border-[#FFA11B]/50'"
                  class="w-10 h-10 rounded-lg border text-sm transition-all">
                  {{ n }}
                </button>
              }
            </div>
            <p class="text-[#d6d6d6]/40 text-xs mt-2">Для груп понад 8 осіб телефонуйте нам</p>
          </div>

          <!-- Comments -->
          <div>
            <label class="block text-sm font-medium text-[#d6d6d6]/80 mb-1.5">
              Коментар
            </label>
            <textarea
              formControlName="comments"
              rows="3"
              placeholder="Особливі побажання, алергії, привід..."
              class="w-full bg-[#232323] text-[#d6d6d6] border border-white/10 focus:border-[#FFA11B] rounded-xl px-4 py-3 text-sm outline-none transition-colors resize-none placeholder-[#d6d6d6]/30">
            </textarea>
          </div>

          <!-- Submit -->
          <button
            type="submit"
            class="w-full bg-[#FFA11B] text-[#232323] py-3.5 rounded-xl font-bold text-base hover:bg-[#e8911a] transition-all hover:scale-[1.01] shadow-lg shadow-[#FFA11B]/20">
            Забронювати стіл
          </button>

          <p class="text-[#d6d6d6]/40 text-xs text-center">
            Після відправлення ми зв'яжемося з вами для підтвердження
          </p>
        </form>
      </div>

      <!-- Info note -->
      <div class="mt-4 bg-[#2d2d2d] rounded-xl p-4 border border-white/5 flex gap-3">
        <svg class="w-5 h-5 text-[#FFA11B] shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
        </svg>
        <p class="text-[#d6d6d6]/60 text-sm">
          Також можна зателефонувати за номером
          <a href="tel:0770717700" class="text-[#FFA11B] hover:underline font-medium">0770717700</a>
        </p>
      </div>
    }
  </div>
</div>
