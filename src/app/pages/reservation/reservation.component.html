<div class="pt-16 min-h-screen">
  <!-- Header -->
  <div class="bg-gradient-to-b from-black to-[#111111] py-16 px-4 border-b border-white/5">
    <div class="max-w-7xl mx-auto text-center">
      <p class="text-[#C8A96E] text-xs tracking-[0.4em] uppercase mb-4">La Mokka</p>
      <h1 class="font-serif text-4xl sm:text-5xl text-[#f0ece4] mb-4">Бронювання столу</h1>
      <div class="flex items-center justify-center gap-4 mb-4">
        <div class="h-px w-12 bg-[#C8A96E]/40"></div>
        <div class="w-1 h-1 rounded-full bg-[#C8A96E]/60"></div>
        <div class="h-px w-12 bg-[#C8A96E]/40"></div>
      </div>
      <p class="text-[#f0ece4]/50 text-base">Заберіть місце та насолоджуйтесь без очікування</p>
    </div>
  </div>

  <div class="max-w-xl mx-auto px-4 py-12 pb-20">
    <!-- Success State -->
    @if (success()) {
      <div class="bg-[#1a1a1a] p-10 border border-[#C8A96E]/30 text-center">
        <div class="w-14 h-14 border border-[#C8A96E]/40 flex items-center justify-center mx-auto mb-6">
          <svg class="w-6 h-6 text-[#C8A96E]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5 13l4 4L19 7"/>
          </svg>
        </div>
        <h2 class="font-serif text-[#f0ece4] text-2xl mb-3">Бронювання прийнято</h2>
        <p class="text-[#f0ece4]/50 text-sm mb-8 leading-relaxed">
          Дякуємо! Ми зв'яжемося з вами найближчим часом для підтвердження бронювання.
        </p>
        <div class="flex flex-col sm:flex-row gap-3 justify-center">
          <button
            (click)="resetForm()"
            class="bg-[#C8A96E] text-[#111111] px-7 py-3 text-sm tracking-widest uppercase font-bold hover:bg-[#b89558] transition-all">
            Нове бронювання
          </button>
          <a routerLink="/menu"
             class="border border-white/20 text-[#f0ece4]/70 px-7 py-3 text-sm tracking-widest uppercase hover:border-white/40 hover:text-[#f0ece4] transition-all">
            Переглянути меню
          </a>
        </div>
      </div>
    } @else {
      <!-- Booking Form -->
      <div class="bg-[#1a1a1a] border border-white/5">
        <div class="p-6 border-b border-white/8">
          <h2 class="font-serif text-[#f0ece4] text-lg">Деталі бронювання</h2>
          <p class="text-[#f0ece4]/40 text-xs mt-1 tracking-wide">Всі поля, позначені *, є обов'язковими</p>
        </div>

        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="p-6 space-y-5">
          <!-- Name -->
          <div>
            <label class="block text-xs font-light text-[#f0ece4]/60 mb-2 tracking-widest uppercase">
              Ваше ім'я *
            </label>
            <input
              type="text"
              formControlName="name"
              placeholder="Введіть ваше ім'я"
              [class]="submitted() && f['name'].invalid ? 'border-red-500/60 focus:border-red-500' : 'border-white/10 focus:border-[#C8A96E]/60'"
              class="w-full bg-[#111111] text-[#f0ece4] border px-4 py-3 text-sm outline-none transition-colors placeholder-[#f0ece4]/20">
            @if (submitted() && f['name'].errors?.['required']) {
              <p class="text-red-400/80 text-xs mt-1">Вкажіть ваше ім'я</p>
            }
            @if (submitted() && f['name'].errors?.['minlength']) {
              <p class="text-red-400/80 text-xs mt-1">Ім'я має містити мінімум 2 символи</p>
            }
          </div>

          <!-- Phone -->
          <div>
            <label class="block text-xs font-light text-[#f0ece4]/60 mb-2 tracking-widest uppercase">
              Телефон *
            </label>
            <input
              type="tel"
              formControlName="phone"
              placeholder="+38 (0__) ___-__-__"
              [class]="submitted() && f['phone'].invalid ? 'border-red-500/60 focus:border-red-500' : 'border-white/10 focus:border-[#C8A96E]/60'"
              class="w-full bg-[#111111] text-[#f0ece4] border px-4 py-3 text-sm outline-none transition-colors placeholder-[#f0ece4]/20">
            @if (submitted() && f['phone'].errors?.['required']) {
              <p class="text-red-400/80 text-xs mt-1">Вкажіть номер телефону</p>
            }
            @if (submitted() && f['phone'].errors?.['pattern']) {
              <p class="text-red-400/80 text-xs mt-1">Введіть коректний номер телефону</p>
            }
          </div>

          <!-- Date & Time -->
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-xs font-light text-[#f0ece4]/60 mb-2 tracking-widest uppercase">
                Дата *
              </label>
              <input
                type="date"
                formControlName="date"
                [min]="minDate"
                [class]="submitted() && f['date'].invalid ? 'border-red-500/60 focus:border-red-500' : 'border-white/10 focus:border-[#C8A96E]/60'"
                class="w-full bg-[#111111] text-[#f0ece4] border px-4 py-3 text-sm outline-none transition-colors">
              @if (submitted() && f['date'].errors?.['required']) {
                <p class="text-red-400/80 text-xs mt-1">Оберіть дату</p>
              }
            </div>

            <div>
              <label class="block text-xs font-light text-[#f0ece4]/60 mb-2 tracking-widest uppercase">
                Час *
              </label>
              <select
                formControlName="time"
                [class]="submitted() && f['time'].invalid ? 'border-red-500/60 focus:border-red-500' : 'border-white/10 focus:border-[#C8A96E]/60'"
                class="w-full bg-[#111111] text-[#f0ece4] border px-4 py-3 text-sm outline-none transition-colors">
                <option value="" disabled>Час</option>
                @for (slot of timeSlots; track slot) {
                  <option [value]="slot">{{ slot }}</option>
                }
              </select>
              @if (submitted() && f['time'].errors?.['required']) {
                <p class="text-red-400/80 text-xs mt-1">Оберіть час</p>
              }
            </div>
          </div>

          <!-- Guests -->
          <div>
            <label class="block text-xs font-light text-[#f0ece4]/60 mb-2 tracking-widest uppercase">
              Кількість гостей *
            </label>
            <div class="flex gap-2 flex-wrap">
              @for (n of guestOptions; track n) {
                <button
                  type="button"
                  (click)="form.patchValue({ guests: n })"
                  [class]="form.value.guests === n
                    ? 'bg-[#C8A96E] text-[#111111] border-[#C8A96E]'
                    : 'bg-[#111111] text-[#f0ece4]/50 border-white/10 hover:border-[#C8A96E]/40'"
                  class="w-10 h-10 border text-sm font-medium transition-all">
                  {{ n }}
                </button>
              }
            </div>
            <p class="text-[#f0ece4]/30 text-xs mt-2">Для груп понад 8 осіб телефонуйте нам</p>
          </div>

          <!-- Comments -->
          <div>
            <label class="block text-xs font-light text-[#f0ece4]/60 mb-2 tracking-widest uppercase">
              Коментар
            </label>
            <textarea
              formControlName="comments"
              rows="3"
              placeholder="Особливі побажання, алергії, привід..."
              class="w-full bg-[#111111] text-[#f0ece4] border border-white/10 focus:border-[#C8A96E]/60 px-4 py-3 text-sm outline-none transition-colors resize-none placeholder-[#f0ece4]/20">
            </textarea>
          </div>

          <!-- Submit -->
          <button
            type="submit"
            class="w-full bg-[#C8A96E] text-[#111111] py-4 text-sm tracking-widest uppercase font-bold hover:bg-[#b89558] transition-all">
            Забронювати стіл
          </button>

          <p class="text-[#f0ece4]/30 text-xs text-center">
            Після відправлення ми зв'яжемося з вами для підтвердження
          </p>
        </form>
      </div>

      <!-- Info note -->
      <div class="mt-4 border border-white/8 p-4 flex gap-3">
        <svg class="w-4 h-4 text-[#C8A96E] shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"/>
        </svg>
        <p class="text-[#f0ece4]/50 text-sm">
          Також можна зателефонувати за номером
          <a href="tel:0770717700" class="text-[#C8A96E] hover:underline">0770717700</a>
        </p>
      </div>
    }
  </div>
</div>
